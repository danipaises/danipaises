<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogos de Curiosidades Pokémon</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f0f0f0;
            background-image: url('https://assets.pokemon.com/static2/_ui/images/textures/wood_grain.png');
        }
        .font-pokemon {
            font-family: 'Press Start 2P', cursive;
        }
        .game-container {
            display: none;
        }
        .pokemon-silhouette {
            filter: brightness(0);
            transition: filter 0.5s ease-in-out;
        }
        .pokemon-silhouette.revealed {
            filter: brightness(1);
        }
        .btn-type {
            transition: all 0.2s ease;
        }
        .btn-type.selected {
            transform: scale(1.1);
            box-shadow: 0 0 10px 2px rgba(255, 255, 0, 0.7);
        }
        #main-menu, .game-container {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
    </style>
</head>
<body class="bg-yellow-300 text-gray-800">

    <div class="container mx-auto p-4 md:p-8 max-w-4xl">
        <header class="text-center mb-8">
            <h1 class="font-pokemon text-3xl md:text-5xl text-blue-800" style="text-shadow: 2px 2px #ffcb05;">Poké-Jogos</h1>
            <p class="text-blue-600 mt-2">Teste seus conhecimentos sobre o universo Pokémon!</p>
        </header>

        <!-- Menu Principal -->
        <main id="main-menu" class="text-center">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <button onclick="startGame('game-qep')" class="bg-red-600 hover:bg-red-700 text-white font-bold py-4 px-6 rounded-lg shadow-lg transform hover:scale-105 transition-transform duration-200">
                    Quem é esse Pokémon?
                </button>
                <button onclick="startGame('game-mcq')" class="bg-green-600 hover:bg-green-700 text-white font-bold py-4 px-6 rounded-lg shadow-lg transform hover:scale-105 transition-transform duration-200">
                    Trivia de Múltipla Escolha
                </button>
                <button onclick="startGame('game-tf')" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-6 rounded-lg shadow-lg transform hover:scale-105 transition-transform duration-200">
                    Verdadeiro ou Falso
                </button>
                <button onclick="startGame('game-type')" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-4 px-6 rounded-lg shadow-lg transform hover:scale-105 transition-transform duration-200">
                    Qual o Tipo?
                </button>
            </div>
        </main>

        <!-- Jogo 1: Quem é esse Pokémon? (Múltipla Escolha) -->
        <div id="game-qep" class="game-container bg-white p-8 rounded-lg shadow-2xl">
            <h2 class="font-pokemon text-2xl text-center mb-6">Quem é esse Pokémon?</h2>
            <div id="qep-loader" class="text-center">Carregando...</div>
            <div id="qep-content" class="hidden">
                <div class="flex justify-center mb-6">
                    <img id="qep-image" src="" alt="Silhueta do Pokémon" class="h-64 pokemon-silhouette">
                </div>
                <div class="text-center">
                    <div id="qep-options" class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4 max-w-lg mx-auto"></div>
                    <p id="qep-result" class="mt-6 text-center h-6 font-bold"></p>
                </div>
            </div>
            <button onclick="backToMenu()" class="mt-8 bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded">Voltar ao Menu</button>
        </div>

        <!-- Jogo 2: Trivia de Múltipla Escolha -->
        <div id="game-mcq" class="game-container bg-white p-8 rounded-lg shadow-2xl">
            <h2 class="font-pokemon text-2xl text-center mb-6">Trivia de Múltipla Escolha</h2>
            <div id="mcq-loader" class="text-center">Gerando pergunta...</div>
            <div id="mcq-content" class="hidden">
                 <p id="mcq-question" class="text-xl text-center font-bold mb-6"></p>
                 <div id="mcq-options" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
                 <p id="mcq-result" class="mt-6 text-center h-6 font-bold"></p>
            </div>
            <button onclick="backToMenu()" class="mt-8 bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded">Voltar ao Menu</button>
        </div>

        <!-- Jogo 3: Verdadeiro ou Falso -->
        <div id="game-tf" class="game-container bg-white p-8 rounded-lg shadow-2xl">
            <h2 class="font-pokemon text-2xl text-center mb-6">Verdadeiro ou Falso?</h2>
            <div id="tf-content">
                <p id="tf-statement" class="text-xl text-center font-semibold mb-6 p-4 bg-gray-100 rounded-lg"></p>
                <div class="flex justify-center gap-6">
                    <button onclick="tfCheckAnswer(true)" class="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-10 rounded-lg text-lg">Verdadeiro</button>
                    <button onclick="tfCheckAnswer(false)" class="bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-10 rounded-lg text-lg">Falso</button>
                </div>
                <p id="tf-result" class="mt-6 text-center h-12 font-bold"></p>
            </div>
             <button onclick="backToMenu()" class="mt-8 bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded">Voltar ao Menu</button>
        </div>

        <!-- Jogo 4: Qual o Tipo? -->
        <div id="game-type" class="game-container bg-white p-8 rounded-lg shadow-2xl">
            <h2 class="font-pokemon text-2xl text-center mb-6">Qual o Tipo?</h2>
            <div id="type-loader" class="text-center">Carregando Pokémon...</div>
            <div id="type-content" class="hidden">
                <div class="flex justify-center mb-6">
                     <img id="type-image" src="" alt="Pokémon" class="h-48">
                     <p id="type-pokemon-name" class="self-center ml-4 text-2xl font-bold capitalize"></p>
                </div>
                <p class="text-center mb-4">Selecione o(s) tipo(s) correto(s):</p>
                <div id="type-options" class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-2 justify-center"></div>
                <div class="text-center mt-6">
                    <button onclick="typeCheckAnswer()" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-8 rounded-full">Verificar</button>
                    <p id="type-result" class="mt-4 h-6 font-bold"></p>
                </div>
            </div>
            <button onclick="backToMenu()" class="mt-8 bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded">Voltar ao Menu</button>
        </div>

    </div>

<script>
    const API_URL = 'https://pokeapi.co/api/v2/';
    const MAX_POKEMON_ID = 898; // Limita até a 8ª geração para dados mais consistentes

    const typeColors = {
        normal: 'bg-gray-400', steel: 'bg-gray-300', rock: 'bg-yellow-700',
        grass: 'bg-green-500', fire: 'bg-red-500', water: 'bg-blue-500',
        bug: 'bg-lime-500', poison: 'bg-purple-600', electric: 'bg-yellow-400',
        ground: 'bg-yellow-600', fighting: 'bg-orange-700', psychic: 'bg-pink-500',
        ghost: 'bg-indigo-700', ice: 'bg-cyan-300', dragon: 'bg-indigo-500',
        dark: 'bg-gray-700', fairy: 'bg-pink-300', flying: 'bg-sky-400'
    };
    const allTypes = Object.keys(typeColors);
    
    // --- Funções Globais ---
    function showLoader(gameId, show) {
        document.getElementById(`${gameId}-loader`).style.display = show ? 'block' : 'none';
        document.getElementById(`${gameId}-content`).style.display = show ? 'none' : 'block';
    }

    function startGame(gameId) {
        document.getElementById('main-menu').style.display = 'none';
        document.getElementById(gameId).style.display = 'block';

        switch(gameId) {
            case 'game-qep': initQEP(); break;
            case 'game-mcq': initMCQ(); break;
            case 'game-tf': initTF(); break;
            case 'game-type': initTypeGame(); break;
        }
    }

    function backToMenu() {
        document.querySelectorAll('.game-container').forEach(el => el.style.display = 'none');
        document.getElementById('main-menu').style.display = 'block';
    }

    async function fetchPokemon(id) {
        try {
            const response = await fetch(`${API_URL}pokemon/${id}`);
            if (!response.ok) throw new Error('Pokémon não encontrado!');
            return await response.json();
        } catch (error) {
            console.error("Erro ao buscar Pokémon:", error);
        }
    }
    
    // --- Jogo 1: Quem é esse Pokémon? ---
    let qepCorrectName = '';
    
    async function initQEP() {
        showLoader('qep', true);
        const qepImage = document.getElementById('qep-image');
        const qepResult = document.getElementById('qep-result');
        const optionsContainer = document.getElementById('qep-options');
        
        qepResult.textContent = '';
        optionsContainer.innerHTML = '';
        qepImage.classList.add('pokemon-silhouette');
        qepImage.classList.remove('revealed');

        const randomId = Math.floor(Math.random() * MAX_POKEMON_ID) + 1;
        const pokemon = await fetchPokemon(randomId);
        
        if (pokemon) {
            qepImage.src = pokemon.sprites.other['official-artwork'].front_default;
            qepCorrectName = pokemon.name;
            const options = await qepGenerateOptions(qepCorrectName);
            qepDisplayOptions(options);
            showLoader('qep', false);
        }
    }

    async function qepGenerateOptions(correctOption) {
        const options = [correctOption];
        while (options.length < 4) {
            const randomId = Math.floor(Math.random() * MAX_POKEMON_ID) + 1;
            const randomPokemon = await fetchPokemon(randomId);
            if (randomPokemon && !options.includes(randomPokemon.name)) {
                options.push(randomPokemon.name);
            }
        }
        return options.sort(() => Math.random() - 0.5);
    }

    function qepDisplayOptions(options) {
        const optionsContainer = document.getElementById('qep-options');
        optionsContainer.innerHTML = '';
        options.forEach(option => {
            const button = document.createElement('button');
            button.textContent = option;
            button.className = 'bg-yellow-400 hover:bg-yellow-500 text-gray-800 font-semibold py-3 px-4 rounded-lg capitalize';
            button.onclick = () => qepCheckAnswer(option, button);
            optionsContainer.appendChild(button);
        });
    }

    function qepCheckAnswer(selectedOption, button) {
        const resultEl = document.getElementById('qep-result');
        const qepImage = document.getElementById('qep-image');
        const buttons = document.querySelectorAll('#qep-options button');

        buttons.forEach(btn => btn.disabled = true);
        qepImage.classList.add('revealed');

        if (selectedOption === qepCorrectName) {
            resultEl.textContent = 'Correto!';
            resultEl.style.color = 'green';
            button.classList.remove('bg-yellow-400');
            button.classList.add('bg-green-500');
        } else {
            resultEl.textContent = `Incorreto! O Pokémon é ${qepCorrectName}.`;
            resultEl.style.color = 'red';
            button.classList.remove('bg-yellow-400');
            button.classList.add('bg-red-500');
            
            buttons.forEach(btn => {
                if(btn.textContent === qepCorrectName) {
                    btn.classList.remove('bg-yellow-400');
                    btn.classList.add('bg-green-500');
                }
            });
        }
        setTimeout(initQEP, 3000);
    }
    
    // --- Jogo 2: Múltipla Escolha ---
    let mcqCorrectAnswer = '';

    async function initMCQ() {
        showLoader('mcq', true);
        document.getElementById('mcq-result').textContent = '';
        
        const questionTypes = ['evolution', 'type', 'generation'];
        const randomQuestionType = questionTypes[Math.floor(Math.random() * questionTypes.length)];

        switch(randomQuestionType) {
            case 'evolution': await generateEvolutionQuestion(); break;
            case 'type': await generateTypeQuestion(); break;
            case 'generation': await generateGenerationQuestion(); break;
        }

        showLoader('mcq', false);
    }

    async function generateEvolutionQuestion() {
        let pokemon;
        let evolutionData;
        let hasEvolution = false;

        // Procura um Pokémon que tenha evolução
        while (!hasEvolution) {
            const randomId = Math.floor(Math.random() * (MAX_POKEMON_ID - 50)) + 1; // Evita os últimos que podem não ter evo data completa
            pokemon = await fetchPokemon(randomId);
            const speciesResponse = await fetch(pokemon.species.url);
            const speciesData = await speciesResponse.json();
            const evolutionChainResponse = await fetch(speciesData.evolution_chain.url);
            evolutionData = await evolutionChainResponse.json();
            
            if (evolutionData.chain.evolves_to.length > 0) {
                hasEvolution = true;
            }
        }

        const basePokemon = evolutionData.chain.species.name;
        const evolution = evolutionData.chain.evolves_to[0].species.name;

        document.getElementById('mcq-question').textContent = `Qual é a evolução de ${basePokemon}?`;
        mcqCorrectAnswer = evolution;
        
        const options = await generateMCQOptions(evolution);
        displayMCQOptions(options);
    }
    
    async function generateTypeQuestion() {
        const randomId = Math.floor(Math.random() * MAX_POKEMON_ID) + 1;
        const pokemon = await fetchPokemon(randomId);
        const pokemonType = pokemon.types[0].type.name;

        document.getElementById('mcq-question').textContent = `Qual destes Pokémon é do tipo ${pokemonType}?`;
        mcqCorrectAnswer = pokemon.name;

        const options = await generateMCQOptions(pokemon.name);
        displayMCQOptions(options);
    }

    async function generateGenerationQuestion() {
        const genData = {
            1: { name: 'Kanto', limit: 151 },
            2: { name: 'Johto', limit: 251 },
            3: { name: 'Hoenn', limit: 386 },
            4: { name: 'Sinnoh', limit: 493 },
            5: { name: 'Unova', limit: 649 },
        };
        const gens = Object.keys(genData);
        const randomGenKey = gens[Math.floor(Math.random() * gens.length)];
        const genInfo = genData[randomGenKey];

        const randomId = Math.floor(Math.random() * genInfo.limit) + (randomGenKey > 1 ? genData[String(Number(randomGenKey)-1)].limit : 0);
        const pokemon = await fetchPokemon(randomId);

        document.getElementById('mcq-question').textContent = `De qual região é o Pokémon ${pokemon.name}?`;
        mcqCorrectAnswer = genInfo.name;

        const options = [genInfo.name];
        while (options.length < 4) {
            const randomOtherGen = gens[Math.floor(Math.random() * gens.length)];
            if (!options.includes(genData[randomOtherGen].name)) {
                options.push(genData[randomOtherGen].name);
            }
        }
        
        displayMCQOptions(options.sort(() => Math.random() - 0.5));
    }


    async function generateMCQOptions(correctOption) {
        const options = [correctOption];
        while (options.length < 4) {
            const randomId = Math.floor(Math.random() * MAX_POKEMON_ID) + 1;
            const randomPokemon = await fetchPokemon(randomId);
            if (randomPokemon && !options.includes(randomPokemon.name)) {
                options.push(randomPokemon.name);
            }
        }
        return options.sort(() => Math.random() - 0.5);
    }

    function displayMCQOptions(options) {
        const optionsContainer = document.getElementById('mcq-options');
        optionsContainer.innerHTML = '';
        options.forEach(option => {
            const button = document.createElement('button');
            button.textContent = option;
            button.className = 'bg-yellow-400 hover:bg-yellow-500 text-gray-800 font-semibold py-3 px-4 rounded-lg capitalize';
            button.onclick = () => mcqCheckAnswer(option, button);
            optionsContainer.appendChild(button);
        });
    }

    function mcqCheckAnswer(selectedOption, button) {
        const resultEl = document.getElementById('mcq-result');
        const buttons = document.querySelectorAll('#mcq-options button');
        buttons.forEach(btn => btn.disabled = true);

        if (selectedOption === mcqCorrectAnswer) {
            resultEl.textContent = 'Correto!';
            resultEl.style.color = 'green';
            button.classList.remove('bg-yellow-400');
            button.classList.add('bg-green-500');
        } else {
            resultEl.textContent = `Incorreto! A resposta era ${mcqCorrectAnswer}.`;
            resultEl.style.color = 'red';
            button.classList.remove('bg-yellow-400');
            button.classList.add('bg-red-500');
            buttons.forEach(btn => {
                if(btn.textContent === mcqCorrectAnswer) {
                    btn.classList.remove('bg-yellow-400');
                    btn.classList.add('bg-green-500');
                }
            });
        }
        setTimeout(initMCQ, 3000);
    }
    
    // --- Jogo 3: Verdadeiro ou Falso ---
    const tfStatements = [
        { statement: 'Pikachu é a evolução de Pichu.', answer: true },
        { statement: 'Charizard é um Pokémon do tipo Dragão e Fogo.', answer: false, explanation: 'Charizard é do tipo Fogo e Voador.' },
        { statement: 'Snorlax evolui para Munchlax.', answer: false, explanation: 'É o contrário, Munchlax evolui para Snorlax.' },
        { statement: 'A região de Kanto foi a primeira a ser introduzida nos jogos.', answer: true },
        { statement: 'O ataque "Splash" do Magikarp não causa nenhum dano.', answer: true },
        { statement: 'Onix evolui para Steelix quando trocado segurando um item "Metal Coat".', answer: true },
        { statement: 'Mewtwo é um clone do Pokémon lendário Mew.', answer: true },
        { statement: 'O tipo Água é super eficaz contra o tipo Fogo.', answer: true },
        { statement: 'Existem mais de 1000 espécies de Pokémon documentadas.', answer: true },
        { statement: 'O Professor Oak dá ao jogador seu primeiro Pokémon na região de Hoenn.', answer: false, explanation: 'O Professor Birch é o professor da região de Hoenn.' },
        { statement: 'Eevee pode evoluir para 8 tipos diferentes.', answer: true },
        { statement: 'O Pokémon lendário Articuno é do tipo Gelo e Psíquico.', answer: false, explanation: 'Articuno (forma de Kanto) é do tipo Gelo e Voador.' },
        { statement: 'A Team Rocket é a equipe vilã principal na região de Hoenn.', answer: false, explanation: 'As equipes vilãs em Hoenn são a Team Aqua e a Team Magma.' },
        { statement: 'Wobbuffet não pode aprender nenhum movimento de ataque direto.', answer: true },
        { statement: 'Slowpoke evolui para Slowking quando atinge o nível 37.', answer: false, explanation: 'Slowpoke evolui para Slowking quando é trocado segurando uma King\'s Rock.' },
        { statement: 'O tipo Fantasma é imune a ataques do tipo Normal.', answer: true },
        { statement: 'Ditto pode se transformar em qualquer outro Pokémon, incluindo os lendários.', answer: true },
        { statement: 'A cidade de Lavender é famosa pelo seu Ginásio do tipo Elétrico.', answer: false, explanation: 'A cidade de Lavender é famosa pela Pokémon Tower, um cemitério Pokémon.' },
        { statement: 'O ataque "Self-Destruct" nocauteia o próprio usuário.', answer: true },
        { statement: 'Tyranitar é um pseudo-lendário da região de Johto.', answer: true },
        { statement: 'O item "Everstone" impede o Pokémon de ganhar experiência.', answer: false, explanation: 'A Everstone (Pedraeterna) impede o Pokémon de evoluir.' },
        { statement: 'O Pokémon Smeargle pode aprender permanentemente quase qualquer movimento usando seu ataque "Sketch".', answer: true },
        { statement: 'A Poké Flute (Flauta Pokémon) é usada para acordar Lugia.', answer: false, explanation: 'A Poké Flute é usada para acordar Snorlax.' },
        { statement: 'Todos os Pokémon iniciais têm uma dupla tipagem em sua forma final.', answer: false, explanation: 'Muitos, como Meganium ou Feraligatr, mantêm um tipo único.' },
        { statement: 'O tipo Psíquico é fraco contra o tipo Inseto.', answer: true },
    ];
    let currentTFStatement = {};

    function initTF() {
        const resultEl = document.getElementById('tf-result');
        resultEl.textContent = '';
        document.querySelectorAll('#tf-content button').forEach(btn => btn.disabled = false);

        currentTFStatement = tfStatements[Math.floor(Math.random() * tfStatements.length)];
        document.getElementById('tf-statement').textContent = currentTFStatement.statement;
    }

    function tfCheckAnswer(userAnswer) {
        const resultEl = document.getElementById('tf-result');
        document.querySelectorAll('#tf-content button').forEach(btn => btn.disabled = true);

        if (userAnswer === currentTFStatement.answer) {
            resultEl.textContent = 'Correto!';
            resultEl.style.color = 'green';
        } else {
            resultEl.textContent = `Incorreto! ${currentTFStatement.explanation || ''}`;
            resultEl.style.color = 'red';
        }
        setTimeout(initTF, 3500);
    }
    
    // --- Jogo 4: Qual o Tipo? ---
    let typeCorrectAnswers = [];

    async function initTypeGame() {
        showLoader('type', true);
        document.getElementById('type-result').textContent = '';
        const randomId = Math.floor(Math.random() * MAX_POKEMON_ID) + 1;
        const pokemon = await fetchPokemon(randomId);

        if (pokemon) {
            document.getElementById('type-image').src = pokemon.sprites.front_default;
            document.getElementById('type-pokemon-name').textContent = pokemon.name;
            typeCorrectAnswers = pokemon.types.map(t => t.type.name);

            const optionsContainer = document.getElementById('type-options');
            optionsContainer.innerHTML = '';
            allTypes.forEach(type => {
                const button = document.createElement('button');
                button.textContent = type;
                button.dataset.type = type;
                button.className = `capitalize text-white font-bold py-2 px-3 rounded-md btn-type ${typeColors[type]}`;
                button.onclick = () => button.classList.toggle('selected');
                optionsContainer.appendChild(button);
            });
            showLoader('type', false);
        }
    }

    function typeCheckAnswer() {
        const selectedButtons = document.querySelectorAll('#type-options .selected');
        const selectedTypes = Array.from(selectedButtons).map(b => b.dataset.type);
        const resultEl = document.getElementById('type-result');
        
        const isCorrect = selectedTypes.length === typeCorrectAnswers.length && 
                          selectedTypes.every(type => typeCorrectAnswers.includes(type));

        if (isCorrect) {
            resultEl.textContent = 'Correto!';
            resultEl.style.color = 'green';
        } else {
            resultEl.textContent = `Incorreto! Os tipos são: ${typeCorrectAnswers.join(', ')}`;
            resultEl.style.color = 'red';
        }
        setTimeout(initTypeGame, 3000);
    }
    
</script>

</body>
</html>
