<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogo das Emo√ß√µes</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
    body {
    font-family: 'Inter', sans-serif;
    transition: background-color 0.3s, color 0.3s;
    }
    .face-display {
    font-size: 6rem;
    line-height: 1;
    }
    .btn, .btn-setting {
    transition: all 0.2s ease-in-out;
    }
    .btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    
    /* Estilos para o Modo de Baixo Est√≠mulo */
    .low-sensory-mode {
    background-color: #fff !important;
    color: #000 !important;
    }
    .low-sensory-mode .shadow-xl { box-shadow: none; border: 2px solid #000; }
    .low-sensory-mode .bg-gray-100 { background-color: #fff; }
    .low-sensory-mode .bg-white { background-color: #fff; }
    .low-sensory-mode .text-gray-800 { color: #000; }
    .low-sensory-mode .text-gray-600 { color: #333; }
    .low-sensory-mode .btn {
    transform: none !important;
    box-shadow: none !important;
    border: 2px solid #000;
    }
    .low-sensory-mode .bg-indigo-600 { background-color: #000; color: #fff;}
    .low-sensory-mode .bg-gray-200 { background-color: #eee; }
    .low-sensory-mode .text-green-600 { color: #008000; }
    .low-sensory-mode .text-red-600 { color: #d0000; }
    .low-sensory-mode #explanation-container { background-color: #f0f0f0; border-top: 2px solid #ccc;}

    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <!-- --- Janela Modal de Instru√ß√µes (aparece no in√≠cio) --- -->
    <div id="instructions-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50">
    <div class="bg-white rounded-2xl shadow-xl p-6 md:p-8 max-w-md w-full text-left">
    <h2 class="text-2xl font-bold mb-4 text-center text-gray-800">Como Jogar</h2>
    <div class="space-y-3 text-gray-700">
    <p><strong>1. Objetivo:</strong> Adivinhe qual emo√ß√£o o rosto est√° a expressar.</p>
    <p><strong>2. Jogue:</strong> Escolha uma das quatro op√ß√µes que achar correta.</p>
    <p><strong>3. Aprenda:</strong> Depois de escolher, vai aparecer uma explica√ß√£o sobre a emo√ß√£o correta para o ajudar a aprender.</p>
    <p><strong>Dica:</strong> Pode mudar a dificuldade e ativar o "Modo Simples" para menos distra√ß√µes visuais a qualquer momento!</p>
    </div>
    <button id="start-game-button" class="btn mt-6 w-full bg-indigo-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-indigo-700">
    Come√ßar a Jogar!
    </button>
    </div>
    </div>


    <!-- --- Conte√∫do Principal do Jogo --- -->
    <div id="game-container" class="bg-white rounded-2xl shadow-xl p-6 md:p-8 text-center w-full max-w-lg mx-auto">
    
    <fieldset class="border-2 border-gray-300 rounded-lg p-4 mb-6">
    <legend class="text-lg font-semibold px-2">Configura√ß√µes</legend>
    <div class="flex flex-col sm:flex-row justify-around items-center gap-4">
    <div class="flex items-center gap-2">
    <label for="difficulty" class="font-semibold">Dificuldade:</label>
    <select id="difficulty" class="btn-setting border-2 border-gray-300 rounded-md p-2">
    <option value="easy">F√°cil</option>
    <option value="medium">M√©dio</option>
    </select>
    </div>
    <div class="flex items-center gap-2">
    <label for="low-sensory-toggle" class="font-semibold">Modo Simples:</label>
    <input type="checkbox" id="low-sensory-toggle" class="h-6 w-6">
    </div>
    </div>
    </fieldset>
    
    <h1 class="text-2xl md:text-3xl font-bold text-gray-800 mb-6">Qual √© a emo√ß√£o?</h1>

    <div id="face-display" class="face-display my-8 text-gray-800"></div>

    <div id="options-container" class="grid grid-cols-2 gap-4 mb-6"></div>

    <p id="feedback" class="h-6 text-lg font-semibold mb-4">&nbsp;</p>

    <div id="explanation-container" class="bg-gray-100 rounded-lg p-4 text-left hidden">
    <h3 id="explanation-title" class="font-bold text-lg mb-1"></h3>
    <p id="explanation-text"></p>
    </div>

    <button id="next-button" class="btn mt-6 w-full bg-indigo-600 text-white font-bold py-3 px-4 rounded-lg">
    Pr√≥ximo
    </button>

    </div>

    <script>
    // --- Elementos do DOM ---
    const instructionsModal = document.getElementById('instructions-modal');
    const startGameButton = document.getElementById('start-game-button');
    const faceDisplay = document.getElementById('face-display');
    const optionsContainer = document.getElementById('options-container');
    const feedback = document.getElementById('feedback');
    const nextButton = document.getElementById('next-button');
    const explanationContainer = document.getElementById('explanation-container');
    const explanationTitle = document.getElementById('explanation-title');
    const explanationText = document.getElementById('explanation-text');
    const difficultySelect = document.getElementById('difficulty');
    const lowSensoryToggle = document.getElementById('low-sensory-toggle');
    
    // --- Dados do Jogo ---
    const emotions = {
    easy: [
    { face: 'üòä', name: 'Feliz', description: 'Sentimento de alegria e contentamento. Uma emo√ß√£o positiva que nos faz sorrir.' },
    { face: 'üò•', name: 'Triste', description: 'Sentimento de infelicidade e melancolia. Uma emo√ß√£o que surge quando perdemos algo importante.' },
    { face: 'üò†', name: 'Zangado', description: 'Sentimento de raiva e irrita√ß√£o. Uma emo√ß√£o que surge quando algo nos frustra ou nos magoa.' },
    { face: 'üòÆ', name: 'Surpreso', description: 'Rea√ß√£o emocional a algo inesperado. Uma emo√ß√£o breve que surge quando algo nos apanha desprevenidos.' },
    { face: 'üò±', name: 'Assustado', description: 'Sentimento de medo intenso. Uma emo√ß√£o de prote√ß√£o que surge quando percebemos perigo.' },
    { face: 'üòÇ', name: 'Alegre', description: 'Uma forma intensa de felicidade que nos faz rir. Expressa grande contentamento e divers√£o.' },
    { face: 'üòç', name: 'Apaixonado', description: 'Sentimento de amor e admira√ß√£o intensa. Uma emo√ß√£o positiva de liga√ß√£o profunda a algu√©m ou algo.' },
    { face: 'üò≠', name: 'Muito Triste', description: 'Uma forma intensa de tristeza que provoca choro. Surge em momentos de grande dor emocional.' }
    ],
    medium: [
    { face: 'ü§î', name: 'Pensativo', description: 'Estado de reflex√£o e concentra√ß√£o mental. N√£o √© uma emo√ß√£o, mas um estado cognitivo de an√°lise.' },
    { face: 'ü§¢', name: 'Nojo', description: 'Sentimento de repulsa e avers√£o. Uma emo√ß√£o b√°sica que nos protege de coisas prejudiciais.' },
    { face: 'üòë', name: 'Neutro', description: 'Estado sem emo√ß√£o particular. Representa calma emocional ou aus√™ncia de sentimentos fortes.' },
    { face: 'ü§Ø', name: 'Chocado', description: 'Sentimento de espanto extremo. Uma forma intensa de surpresa face a algo inacredit√°vel.' },
    { face: 'ü•∫', name: 'Suplicante', description: 'Express√£o de vulnerabilidade e pedido. Combina tristeza com esperan√ßa de compaix√£o.' },
    { face: 'üßê', name: 'Desconfiado', description: 'Sentimento de d√∫vida e suspeita. Uma emo√ß√£o de cautela face ao desconhecido.' },
    { face: 'ü•¥', name: 'Confuso', description: 'Estado de desorienta√ß√£o mental. Surge quando n√£o conseguimos compreender uma situa√ß√£o.' },
    { face: 'üôÑ', name: 'Irritado', description: 'Sentimento de aborrecimento e impaci√™ncia. Uma forma ligeira de raiva face a algo tedioso.' },
    { face: 'üòá', name: 'Inocente', description: 'Express√£o de pureza e bondade. Representa aus√™ncia de mal√≠cia ou culpa.' },
    { face: 'ü§©', name: 'Fascinado', description: 'Sentimento de admira√ß√£o e encantamento. Uma emo√ß√£o positiva de grande interesse e entusiasmo.' }
    ]
    };

    let allEmotionsForLevel = [];
    let emotionPool = [];
    let currentEmotion = null;

    // --- Fun√ß√µes do Jogo ---

    function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
    }
    }
    
    function setupGame() {
    const difficulty = difficultySelect.value;
    if (difficulty === 'easy') {
    allEmotionsForLevel = [...emotions.easy];
    } else {
    allEmotionsForLevel = [...emotions.easy, ...emotions.medium];
    }
    refillPool();
    displayNewFace();
    }

    function refillPool() {
    emotionPool = [...allEmotionsForLevel];
    shuffle(emotionPool);
    }

    function displayNewFace() {
    if (emotionPool.length === 0) {
    refillPool();
    }
    currentEmotion = emotionPool.pop();
    faceDisplay.textContent = currentEmotion.face;

    let options = [currentEmotion];
    let otherEmotions = allEmotionsForLevel.filter(e => e.name !== currentEmotion.name);
    shuffle(otherEmotions);
    const optionsCount = Math.min(3, otherEmotions.length);
    options.push(...otherEmotions.slice(0, optionsCount));
    shuffle(options);

    optionsContainer.innerHTML = '';
    options.forEach(opt => {
    const button = document.createElement('button');
    button.textContent = opt.name;
    button.disabled = false;
    button.classList.add('btn', 'bg-gray-200', 'text-gray-700', 'font-semibold', 'py-3', 'px-4', 'rounded-lg');
    button.onclick = () => checkAnswer(opt);
    optionsContainer.appendChild(button);
    });
    
    feedback.textContent = '\u00A0';
    feedback.className = 'h-6 text-lg font-semibold mb-4';
    explanationContainer.classList.add('hidden');
    nextButton.style.display = 'none'; 
    optionsContainer.style.display = 'grid';
    }

    function checkAnswer(selectedOption) {
    const buttons = optionsContainer.querySelectorAll('button');
    buttons.forEach(button => button.disabled = true);

    if (selectedOption.name === currentEmotion.name) {
    feedback.textContent = 'Correto!';
    feedback.classList.add('text-green-600');
    } else {
    feedback.innerHTML = `Quase! A resposta era <strong>${currentEmotion.name}</strong>.`;
    feedback.classList.add('text-red-600');
    }
    
    explanationTitle.textContent = `${currentEmotion.face} ${currentEmotion.name}`;
    explanationText.textContent = currentEmotion.description;
    explanationContainer.classList.remove('hidden');
    
    optionsContainer.style.display = 'none';
    nextButton.style.display = 'block';
    }

    // --- Listeners de Eventos ---
    
    // Listener para o bot√£o que come√ßa o jogo
    startGameButton.addEventListener('click', () => {
    instructionsModal.classList.add('hidden'); // Esconde a janela de instru√ß√µes
    setupGame(); // Inicia o jogo pela primeira vez
    });
    
    // Outros listeners
    nextButton.addEventListener('click', displayNewFace);
    difficultySelect.addEventListener('change', setupGame);
    lowSensoryToggle.addEventListener('change', (e) => {
    document.body.classList.toggle('low-sensory-mode', e.target.checked);
    });

    // O jogo n√£o come√ßa automaticamente, espera pelo clique no bot√£o "Come√ßar a Jogar!".
    </script>
</body>
</html>
